function refresh(e,o){var t=e,n=function(e){e.walkIndex==t.walkIndex&&e.paused==t.paused||o(e,function(){t=e})},r=function(){window.location=window.location},u=new EventSource("/notifications");u.onmessage=function(e){n(JSON.parse(e.data))},u.onerror=function(e){console.log("Unable to reach notifications",e)};var a=function(){jQuery.ajax({method:"GET",url:"/state",success:function(e){n(e),setTimeout(a,2500)},error:r})};setTimeout(a,2500)}function refreshDisplay(e,o){var t=function(e){jQuery("body").html(e),o()},n=function(){o()};jQuery.ajax({method:"GET",url:window.location,headers:{Accept:"application/vnd.easycast.display+html"},success:t,error:n})}function refreshRemote(e,o){jQuery("ul.remote li.active").removeClass("active"),jQuery("ul.remote li.node-"+e.walkIndex).addClass("active");var t=jQuery("ul.remote li.active").offset(),n=window.innerHeight;jQuery("html, body").animate({scrollTop:t.top-n/3,scrollLeft:t.left}),e.paused?(jQuery("#scheduler_icon").addClass("fa-play"),jQuery("#scheduler_icon").removeClass("fa-pause")):(jQuery("#scheduler_icon").removeClass("fa-play"),jQuery("#scheduler_icon").addClass("fa-pause")),o()}function refreshDoors(e,o){jQuery("ul.doors li.active").removeClass("active"),jQuery("ul.doors li.node-"+e.doorIndex).addClass("active"),o()}function installGallery(e,o,t){function n(r){var u=jQuery("#"+e+" img");u.length>0&&(u[0].src=o[r],setTimeout(function(){n((r+1)%o.length)},t))}n(0)}jQuery(function(){function e(e){e.preventDefault(),e.stopPropagation();var o=n.find("ul li.active").offset(),t=window.innerHeight;n.css({left:0}),n.addClass("open"),n.animate({scrollTop:o.top-t/2,scrollLeft:o.left})}function o(e){e.preventDefault(),e.stopPropagation(),n.css({left:-350}),n.removeClass("open")}function t(){document.getElementById("menu")&&(n=jQuery("#menu"),jQuery(".open-menu-btn").click(e),jQuery(".close-menu-btn").click(o),jQuery("body").click(o))}var n=null;t()}),jQuery(function(){jQuery("#cogs-toggle").click(function(){jQuery("ul.remote.prev-next").hide(),jQuery("ul.remote.cogs").show()}),jQuery("#cogs-back").click(function(){jQuery("ul.remote.prev-next").show(),jQuery("ul.remote.cogs").hide()}),jQuery("ul.remote > li a").click(function(e){var o=jQuery(this).attr("href");if(o){jQuery(this).data("confirm")&&!confirm("Etes-vous s\xfbr.e?")||(e.preventDefault(),e.stopPropagation(),$.ajax({url:o,method:"POST",data:{}}))}return!1})}),jQuery(function(){jQuery("ul.doors > li").click(function(e){var o=jQuery(jQuery(this).find("a")).attr("href");return o&&(e.preventDefault(),e.stopPropagation(),$.ajax({url:o,method:"POST",data:{}})),!1})}),jQuery(function(){function e(){window.location=window.location}0!=jQuery("body.error").length&&setTimeout(e,2500)});