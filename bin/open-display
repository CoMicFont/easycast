#!/bin/sh
DISPLAY_NUM="${1:-0}"
WINDOW_SIZE="${2:-0,0}"

export DISPLAY=":0"
sed -i 's/"exited_cleanly":false/"exited_cleanly":true/' ~/.config/chromium/'Local State'
sed -i 's/"exited_cleanly":false/"exited_cleanly":true/; s/"exit_type":"[^"]\+"/"exit_type":"Normal"/' ~/.config/chromium/Default/Preferences
chromium-browser \
  --kiosk \
  --no-default-browser-check \
  --new-window \
  --window-position=$WINDOW_SIZE \
  --no-first-run \
  --disable-infobars \
  --disable-session-crashed-bubble \
  --disk-cache-size=104857600 \
  --user-data-dir="/home/pi/Documents/Profiles/$DISPLAY_NUM" \
  http://172.16.19.1/display/$DISPLAY_NUM
